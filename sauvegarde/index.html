<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="index, follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <meta name="description" content="Nimba - Le sommet vous rend visible">
  <meta name="keywords" content="Nimba, transfert d'argent, boutique, Guinée">

  <!-- FAVICONS optimisés -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  <meta name="msapplication-config" content="favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Police et icônes Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    integrity="sha512-J2PSW06P8RGQ5Y89hA3a5ZXM+lvDEQj3Z8LJjcwvPMJtMBF5t9fT/Bqp1JXo1sPUxFM3Rty+Zwq4FyY0HwEKcg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <title>Nimba - Le sommet vous rend visible</title>
  <style>
    :root {
      --primary: #007AFF;
      --primary-hover: #0056CC;
      --secondary: #ff6e14;
      --background: #ffffff;
      --background-blur: rgba(255, 255, 255, 0.85);
      --text-primary: #1d1d1f;
      --text-secondary: #86868b;
      --border: #d2d2d7;
      --shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
      --shadow-light: 0 2px 8px rgba(0, 0, 0, 0.1);
      --radius: 12px;
      --radius-small: 8px;
      --transition: cubic-bezier(0.28, 0, 0.63, 1);
      --header-height-mobile: 180px;
      --header-height-desktop: 160px;
    }

    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      color: var(--text-primary);
      /* Prévention du scroll horizontal */
      overflow-x: hidden;
    }

    /* Cache visually-hidden */
    .visually-hidden {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }

    /* === CONTAINER PRINCIPAL DU HEADER === */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 999;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background-color: var(--background-blur);
      border-bottom: 1px solid var(--border);
      transition: all 0.3s var(--transition);
      /* Support pour backdrop-filter */
      -webkit-backdrop-filter: blur(20px);
      backdrop-filter: blur(20px);
    }

    .header.scrolled {
      box-shadow: var(--shadow);
      background-color: rgba(255, 255, 255, 0.95);
    }

    /* === SECTION QUI DISPARAÎT AU SCROLL (MOBILE) === */
    .header-disappearing {
      transition: all 0.3s var(--transition);
      overflow: hidden;
      will-change: transform, opacity;
    }

    @media (max-width: 767px) {
      .header.scrolled .header-disappearing {
        max-height: 0;
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
      }
    }

    /* === LIGNE 1 : Logo + Contact/Réseaux + Auth === */
    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      min-height: 60px;
      padding-right: 80px; /* Espace pour le burger */
      gap: 12px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
      flex: 1;
      min-width: 0; /* Permet la compression */
    }

    .header__logo {
      flex-shrink: 0;
    }

    .header__logo img {
      height: 40px;
      width: auto;
      border-radius: var(--radius-small);
      transition: all 0.3s var(--transition);
      display: block;
    }

    .header__logo:hover img {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 122, 255, 0.3);
    }

    .top-links {
      display: flex;
      gap: 16px;
      flex-shrink: 1;
      min-width: 0;
    }

    .top-links a {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 16px;
      transition: all 0.2s var(--transition);
      background: rgba(0, 122, 255, 0.05);
      white-space: nowrap;
    }

    .top-links a:hover,
    .top-links a:focus {
      background: rgba(0, 122, 255, 0.1);
      color: var(--primary);
      transform: translateY(-1px);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* Recherche Desktop (cachée sur mobile) */
    .search-desktop {
      display: none;
    }

    .auth-buttons {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .inscription {
      padding: 8px 16px;
      background: rgba(0, 122, 255, 0.1);
      color: var(--primary);
      text-decoration: none;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.2s var(--transition);
      white-space: nowrap;
      border: 1px solid rgba(0, 122, 255, 0.15);
    }

    .inscription:hover,
    .inscription:focus {
      background: rgba(0, 122, 255, 0.15);
      transform: translateY(-1px);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    .login-button {
      background: linear-gradient(135deg, var(--secondary) 0%, #e55a0f 100%);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s var(--transition);
      box-shadow: 0 2px 8px rgba(255, 110, 20, 0.3);
      white-space: nowrap;
    }

    .login-button:hover,
    .login-button:focus {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 110, 20, 0.4);
      outline: 2px solid rgba(255, 255, 255, 0.5);
      outline-offset: 2px;
    }

    /* === SECTION QUI RESTE VISIBLE AU SCROLL === */
    .header-persistent {
      position: relative;
      z-index: 2;
    }

    /* === LIGNE 2 : Barre de recherche mobile (RESTE VISIBLE) === */
    .header-search-mobile {
      padding: 8px 20px;
      padding-right: 80px;
      background: var(--background-blur);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      transition: all 0.3s var(--transition);
    }

    .search-form {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
    }

    @media (max-width: 767px) {
      .header.scrolled .search-form {
        max-width: none;
        margin: 0;
      }
    }

    .search-form input {
      width: 100%;
      height: 40px;
      padding: 0 50px 0 16px;
      border: 1.5px solid var(--border);
      border-radius: 20px;
      background: var(--background);
      font-size: 15px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.3s var(--transition);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .search-form input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.08),
                  0 2px 8px rgba(0, 122, 255, 0.12);
      transform: translateY(-1px);
    }

    .search-form input::placeholder {
      color: var(--text-secondary);
      opacity: 0.7;
    }

    .search-form button {
      position: absolute;
      right: 4px;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 16px;
      cursor: pointer;
      color: white;
      font-size: 14px;
      transition: all 0.3s var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .search-form button:hover,
    .search-form button:focus {
      transform: translateY(-50%) scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
      outline: 2px solid rgba(255, 255, 255, 0.5);
    }

    /* === LIGNE 3 : Menu principal SOUS la barre === */
    .main-nav {
      background: var(--background-blur);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      transition: all 0.3s var(--transition);
      will-change: transform, opacity;
      /* 🔥 FIX: Z-index plus élevé que le mega-menu fermé */
      z-index: 1002;
      position: relative;
    }

    @media (max-width: 767px) {
      .header.scrolled .main-nav {
        max-height: 0;
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
        overflow: hidden;
      }
    }

    .main-nav ul {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 12px;
      padding: 12px 20px;
      list-style: none;
    }

    .main-nav li a {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      background: rgba(0, 122, 255, 0.08);
      color: var(--primary);
      text-decoration: none;
      border-radius: 16px;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.2s var(--transition);
      white-space: nowrap;
      border: 1px solid rgba(0, 122, 255, 0.1);
      /* 🔥 FIX: Position relative pour s'assurer qu'ils restent cliquables */
      position: relative;
      z-index: 1;
    }

    .main-nav li a:hover,
    .main-nav li a:focus {
      background: rgba(0, 122, 255, 0.12);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 122, 255, 0.2);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* === BURGER MENU FIXE === */
    .burger-menu {
      position: fixed;
      top: 8px;
      right: 20px;
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 0, 0, 0.05);
      border-radius: var(--radius-small);
      cursor: pointer;
      padding: 0;
      transition: all 0.2s var(--transition);
      z-index: 1001;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      font-size: 18px;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .burger-menu:hover,
    .burger-menu:focus {
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    .burger-menu.active {
      transform: rotate(90deg);
      background: var(--primary);
      color: white;
    }

    /* === MEGA MENU DROPDOWN (MOBILE) === */
    .mega-menu {
      position: fixed;
      top: 60px;
      right: 20px;
      width: min(320px, calc(100vw - 40px));
      max-height: 0;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: all 0.3s var(--transition);
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
      /* 🔥 FIX: Z-index négatif quand fermé pour ne pas bloquer les clics */
      z-index: -1;
      will-change: transform, opacity;
      /* 🔥 FIX: Pointer-events none quand fermé */
      pointer-events: none;
    }

    .mega-menu.show {
      max-height: min(80vh, 600px);
      opacity: 1;
      padding: 20px;
      transform: translateY(0) scale(1);
      overflow-y: auto;
      /* 🔥 FIX: Z-index élevé et pointer-events auto seulement quand ouvert */
      z-index: 1000;
      pointer-events: auto;
    }

    .mega-menu ul {
      list-style: none;
    }

    .mega-menu > ul > li {
      margin-bottom: 8px;
    }

    .mega-menu > ul > li > button,
    .mega-menu > ul > li > a {
      display: block;
      width: 100%;
      padding: 12px 16px;
      background: none;
      border: none;
      text-align: left;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      border-radius: var(--radius-small);
      transition: all 0.2s var(--transition);
      text-decoration: none;
      font-family: inherit;
    }

    .mega-menu > ul > li > button:hover,
    .mega-menu > ul > li > button:focus,
    .mega-menu > ul > li > a:hover,
    .mega-menu > ul > li > a:focus {
      background: rgba(0, 122, 255, 0.1);
      color: var(--primary);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    .submenu {
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s var(--transition);
      margin-left: 16px;
      will-change: max-height;
    }

    .submenu.show {
      max-height: 300px;
      margin-top: 8px;
    }

    .submenu li a {
      display: block;
      padding: 8px 12px;
      font-size: 13px;
      color: var(--text-secondary);
      text-decoration: none;
      border-radius: var(--radius-small);
      transition: all 0.2s var(--transition);
    }

    .submenu li a:hover,
    .submenu li a:focus {
      background: rgba(0, 122, 255, 0.05);
      color: var(--primary);
      transform: translateX(4px);
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* === RESPONSIVE DESKTOP === */
    @media (min-width: 768px) {
      /* === HEADER STICKY DESKTOP === */
      .header {
        position: sticky;
        top: 0;
        background-color: rgba(255, 255, 255, 0.98);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }

      .header-disappearing,
      .main-nav {
        max-height: none !important;
        opacity: 1 !important;
        transform: none !important;
        pointer-events: auto !important;
      }

      /* === MEGA MENU DISPARAIT AU SCROLL SUR DESKTOP === */
      .header.scrolled .mega-menu {
        max-height: 0 !important;
        opacity: 0 !important;
        overflow: hidden !important;
        pointer-events: none !important;
        transform: translateY(-100%) !important;
        transition: all 0.3s var(--transition);
      }

      /* === HEADER TOP DESKTOP === */
      .header-top {
        padding: 16px 40px;
        min-height: 70px;
        padding-right: 40px;
        gap: 40px;
      }

      .header-left {
        gap: 40px;
      }

      .header__logo img {
        height: 45px;
      }

      .top-links {
        gap: 30px;
      }

      .top-links a {
        font-size: 14px;
        font-weight: 400;
        color: var(--text-secondary);
        padding: 0;
        background: none;
        border-radius: 0;
        letter-spacing: 0.3px;
      }

      .top-links a:hover,
      .top-links a:focus {
        background: none;
        color: var(--primary);
        transform: none;
        outline: none;
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      /* === RECHERCHE DESKTOP === */
      .search-desktop {
        display: block;
        flex: 1;
        max-width: 600px;
        margin: 0 40px;
      }

      .search-container {
        position: relative;
        display: flex;
        align-items: center;
      }

      .search-container input {
        width: 100%;
        height: 44px;
        padding: 0 130px 0 20px;
        border: 1px solid var(--border);
        border-radius: 22px;
        background: rgba(255, 255, 255, 0.8);
        font-size: 15px;
        outline: none;
        transition: all 0.3s var(--transition);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }

      .search-container input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.08),
                    0 4px 16px rgba(0, 0, 0, 0.08);
        background: white;
      }

      .search-container button {
        position: absolute;
        right: 6px;
        top: 50%;
        transform: translateY(-50%);
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border: none;
        padding: 10px 24px;
        border-radius: 18px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s var(--transition);
      }

      .search-container button:hover,
      .search-container button:focus {
        transform: translateY(-50%) scale(1.02);
        box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
        outline: 2px solid rgba(255, 255, 255, 0.5);
      }

      /* === AUTH BUTTONS DESKTOP === */
      .auth-buttons {
        gap: 30px;
        flex-shrink: 0;
      }

      .inscription {
        padding: 0;
        background: none;
        color: var(--primary);
        border-radius: 0;
        font-size: 14px;
        font-weight: 600;
        border: none;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .inscription:hover,
      .inscription:focus {
        color: var(--primary-hover);
        background: none;
        transform: none;
        outline: none;
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      .login-button {
        background: none;
        color: var(--text-primary);
        padding: 0;
        border-radius: 0;
        font-weight: 500;
        font-size: 14px;
        box-shadow: none;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .login-button:hover,
      .login-button:focus {
        color: var(--primary);
        transform: none;
        box-shadow: none;
        background: none;
        outline: none;
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      /* === MASQUER RECHERCHE MOBILE === */
      .header-search-mobile {
        display: none;
      }

      /* === MENU PRINCIPAL DESKTOP === */
      .main-nav ul {
        justify-content: center;
        gap: 50px;
        padding: 18px 40px;
        flex-wrap: nowrap;
      }

      .main-nav li a {
        font-size: 14px;
        font-weight: 500;
        color: var(--text-primary);
        padding: 0;
        background: none;
        border: none;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .main-nav li a:hover,
      .main-nav li a:focus {
        color: var(--primary);
        transform: none;
        background: none;
        box-shadow: none;
        outline: none;
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      /* === MEGA MENU DESKTOP - DESIGN MODERNE === */
      .mega-menu {
        position: static;
        width: 100%;
        max-height: none;
        overflow: visible;
        background: rgba(248, 250, 252, 0.95);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: none;
        border-radius: 0;
        box-shadow: none;
        opacity: 1;
        transform: none;
        z-index: auto;
        padding: 0;
        border-top: 1px solid rgba(0, 0, 0, 0.04);
        /* 🔥 FIX: Pointer-events auto sur desktop */
        pointer-events: auto;
      }

      .mega-menu > ul {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
        padding: 16px 40px;
        list-style: none;
        flex-wrap: wrap;
        margin: 0;
      }

      .mega-menu > ul > li {
        position: relative;
        margin-bottom: 0;
      }

      .mega-menu > ul > li > button,
      .mega-menu > ul > li > a {
        display: block;
        padding: 10px 20px;
        background: none;
        border: none;
        text-align: center;
        color: var(--text-primary);
        font-weight: 500;
        font-size: 13px;
        cursor: pointer;
        border-radius: 6px;
        transition: all 0.2s var(--transition);
        text-decoration: none;
        white-space: nowrap;
        width: auto;
        text-transform: uppercase;
        letter-spacing: 0.4px;
        font-family: inherit;
      }

      .mega-menu > ul > li > button:hover,
      .mega-menu > ul > li > button:focus,
      .mega-menu > ul > li > a:hover,
      .mega-menu > ul > li > a:focus {
        background: rgba(0, 122, 255, 0.06);
        color: var(--primary);
        transform: translateY(-1px);
        outline: none;
      }

      /* === DROPDOWNS DESKTOP AU HOVER === */
      .mega-menu .submenu {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        width: 240px;
        max-height: 0;
        overflow: hidden;
        background: white;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
        transition: all 0.3s var(--transition);
        margin: 0;
        z-index: 1000;
        opacity: 0;
        transform: translateX(-50%) translateY(-8px);
        will-change: transform, opacity;
      }

      .mega-menu > ul > li:hover .submenu,
      .mega-menu > ul > li:focus-within .submenu {
        max-height: 400px;
        opacity: 1;
        transform: translateX(-50%) translateY(0);
        padding: 12px 0;
        margin-top: 8px;
      }

      .mega-menu .submenu li {
        margin: 0;
      }

      .mega-menu .submenu li a {
        display: block;
        padding: 12px 24px;
        font-size: 13px;
        color: var(--text-primary);
        text-decoration: none;
        transition: all 0.2s var(--transition);
        width: 100%;
        text-align: left;
        text-transform: none;
        font-weight: 400;
        letter-spacing: normal;
        border-radius: 0;
      }

      .mega-menu .submenu li a:hover,
      .mega-menu .submenu li a:focus {
        background: rgba(0, 122, 255, 0.06);
        color: var(--primary);
        transform: none;
        padding-left: 28px;
        outline: none;
      }

      /* === MASQUER BURGER SUR DESKTOP === */
      .burger-menu {
        display: none;
      }
    }

    /* === CONTENU PRINCIPAL === */
    .main-content {
      margin-top: var(--header-height-mobile);
      padding: 20px;
      min-height: 100vh;
    }

    @media (min-width: 768px) {
      .main-content {
        margin-top: 20px;
        padding-top: 20px;
      }
    }

    /* === STYLES DU CONTENU === */
    .recherche-section, .scrolling-text-container, .central, .medium-section,
    .left-column, .right-column {
      margin-bottom: 20px;
      padding: 20px;
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow-light);
    }

    .footer {
      background: var(--text-primary);
      color: white;
      padding: 40px 20px;
      margin-top: 40px;
    }

    .payment-methods {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .payment-logo img {
      height: 30px;
      width: auto;
    }

    .footer-left ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .footer-left a {
      color: white;
      text-decoration: none;
      font-size: 14px;
    }

    .footer-right {
      text-align: center;
      font-size: 14px;
      color: var(--text-secondary);
    }

    /* === OPTIMISATIONS PERFORMANCE === */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* === RESPONSIVE TRÈS PETIT ÉCRANS === */
    @media (max-width: 480px) {
      .top-links {
        display: none;
      }

      .auth-buttons {
        gap: 8px;
      }

      .inscription,
      .login-button {
        font-size: 12px;
        padding: 6px 12px;
      }

      .header-top {
        padding: 10px 15px;
        padding-right: 70px;
      }

      .header-search-mobile {
        padding: 8px 15px;
        padding-right: 70px;
      }

      .main-content {
        margin-top: 160px;
        padding: 15px;
      }

      .burger-menu {
        right: 15px;
        width: 40px;
        height: 40px;
      }

      .mega-menu {
        right: 15px;
        width: calc(100vw - 30px);
      }
    }

    /* === AMÉLIORATION DE LA LISIBILITÉ === */
    @media (max-width: 360px) {
      .main-nav ul {
        gap: 8px;
      }
      
      .main-nav li a {
        font-size: 11px;
        padding: 6px 12px;
      }
    }
  </style>
</head>

<body>
  <!-- === HEADER PRINCIPAL === -->
  <header class="header" role="banner" data-testid="header" id="mainHeader">
    
    <!-- SECTION QUI DISPARAÎT AU SCROLL (MOBILE ONLY) -->
    <div class="header-disappearing">
      
      <!-- LIGNE 1 : Logo + Contact/Réseaux + Auth -->
      <div class="header-top">
        <div class="header-left">
          <div class="header__logo">
            <img src="img_traitee/logo2.jpg" alt="Logo Nimba" loading="lazy">
          </div>
          <div class="top-links">
            <a href="#contact" tabindex="0">CONTACT</a>
            <a href="#reseaux-sociaux" tabindex="0">RÉSEAUX SOCIAUX</a>
          </div>
        </div>

        <!-- Recherche Desktop -->
        <div class="search-desktop">
          <form action="/recherche" method="get" class="search-container" role="search">
            <label for="search-desktop" class="visually-hidden">Recherche</label>
            <input type="text" id="search-desktop" name="q" placeholder="Rechercher un produit, un service…" aria-label="Recherche desktop" autocomplete="off">
            <button type="submit" aria-label="Lancer la recherche">Rechercher</button>
          </form>
        </div>

        <div class="auth-buttons" role="group" aria-label="Boutons d'authentification">
          <a href="#inscription" class="inscription" tabindex="0">INSCRIPTION</a>
          <button class="login-button" type="button">Connexion</button>
        </div>
      </div>
      
    </div>

    <!-- SECTION QUI RESTE VISIBLE AU SCROLL -->
    <div class="header-persistent">
      
      <!-- LIGNE 2 : Barre de recherche mobile (RESTE VISIBLE) -->
      <div class="header-search-mobile">
        <form action="/recherche" method="get" class="search-form" role="search">
          <label for="search-mobile" class="visually-hidden">Recherche mobile</label>
          <input
            type="text"
            id="search-mobile"
            name="q"
            placeholder="Rechercher un produit ou un service…"
            aria-label="Recherche mobile"
            autocomplete="off"
          />
          <button type="submit" aria-label="Lancer la recherche">
            🔍
          </button>
        </form>
      </div>

      <!-- LIGNE 3 : Menu principal SOUS la barre -->
      <nav class="main-nav" role="navigation" aria-label="Menu principal">
        <ul>
          <li><a href="#guineetransfert" tabindex="0">GUINEETRANSFERT</a></li>
          <li><a href="#transfert" tabindex="0">TRANSFERT D'ARGENT</a></li>
          <li><a href="#boutique" tabindex="0">BOUTIQUE</a></li>
          <li><a href="#recherche-avancee" tabindex="0">RECHERCHE AVANCÉE</a></li>
        </ul>
      </nav>
      
    </div>
    
    <!-- MEGA MENU : Dropdown mobile / Horizontal desktop STICKY -->
    <nav class="mega-menu" aria-label="Menu complémentaire" id="megaMenu" role="navigation">
      <ul>
        <li>
          <button type="button" data-submenu="emploi" aria-expanded="false" aria-haspopup="true">Emploi</button>
          <ul class="submenu" id="emploi" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Offres d'emploi</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">CV et candidatures</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Formation</a></li>
          </ul>
        </li>
        <li>
          <button type="button" data-submenu="alimentaire" aria-expanded="false" aria-haspopup="true">Alimentaire</button>
          <ul class="submenu" id="alimentaire" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Produits frais</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Épicerie</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Boissons</a></li>
          </ul>
        </li>
        <li>
          <button type="button" data-submenu="cosmetique" aria-expanded="false" aria-haspopup="true">Cosmétique</button>
          <ul class="submenu" id="cosmetique" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Soins du corps</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Soins du visage</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Cheveux</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Produits naturels / bio</a></li>
          </ul>
        </li>
        <li>
          <button type="button" data-submenu="vetements" aria-expanded="false" aria-haspopup="true">Vêtements</button>
          <ul class="submenu" id="vetements" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Hommes</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Femmes</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Enfants</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Accessoires</a></li>
          </ul>
        </li>
        <li>
          <button type="button" data-submenu="maison" aria-expanded="false" aria-haspopup="true">Maison / Déco</button>
          <ul class="submenu" id="maison" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Cuisine & salle à manger</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Linge de maison</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Meubles & rangements</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Décoration</a></li>
          </ul>
        </li>
        <li><a href="#" tabindex="0">Promotions</a></li>
        <li><a href="#" tabindex="0">Nouveautés</a></li>
        <li>
          <button type="button" data-submenu="compte" aria-expanded="false" aria-haspopup="true">Mon compte</button>
          <ul class="submenu" id="compte" role="menu">
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Connexion / Inscription</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Mes commandes</a></li>
            <li role="none"><a href="#" role="menuitem" tabindex="-1">Mon panier</a></li>
          </ul>
        </li>
      </ul>
    </nav>
    
  </header>

  <!-- BURGER MENU FIXE (Mobile uniquement) -->
  <button class="burger-menu" aria-label="Menu principal" aria-expanded="false" id="burgerMenu" type="button">☰</button>

  <!-- === CONTENU PRINCIPAL === -->
  <main class="main-content" data-testid="main-content">

    <!-- Partie supérieure avec la barre de recherche et la zone de texte défilante -->
    <div class="recherche-section">
      <div class="scrolling-text-container">
        <div class="scrolling-text">
          <p>🎯 Design moderne et minimaliste appliqué ✨ Mobile first préservé 📱 Mega menu horizontal et sticky sur desktop 🖥️</p>
        </div>
      </div>
    </div>

    <!-- Partie Centrale -->
    <div class="central">
      <!-- Partie inférieure 1 avec les deux colonnes -->
      <div class="medium-section">
        <!-- Colonne de gauche -->
        <div class="left-column">
          <h2>Du nouveau dans notre boutique</h2>
          <p>Découvrez nos dernières nouveautés et offres spéciales.</p>
        </div>
      
        <!-- Colonne de droite -->
        <div class="right-column">
          <h2>Calculateur de transfert d'argent</h2>
          <p>Calculez vos frais de transfert en temps réel.</p>
        </div>
      </div>
      
      <!-- Partie inférieure 2 avec les deux colonnes -->
      <div class="medium-section">
        <!-- Colonne de gauche -->
        <div class="left-column">
          <h2>Services premium</h2>
          <p>Profitez de nos services exclusifs pour nos clients VIP.</p>
        </div>
      
        <!-- Colonne de droite -->
        <div class="right-column">
          <h2>Support client 24/7</h2>
          <p>Notre équipe est disponible pour vous aider à tout moment.</p>
        </div>
      </div>
    </div>

  </main>

  <!-- Pied de page -->
  <footer class="footer" data-testid="footer">
    <!-- les moyens de paiement -->
    <div class="payment-methods">
      <div class="payment-logo"><img src="img_traitee/mastercard.jpg" alt="Mastercard" loading="lazy"></div>
      <div class="payment-logo"><img src="img_traitee/visa.jpg" alt="Visa" loading="lazy"></div>
      <div class="payment-logo"><img src="img_traitee/maestro.jpg" alt="Maestro" loading="lazy"></div>
    </div>

    <div class="footer-left">
      <ul>
        <li><a href="#" tabindex="0">Nous contacter</a></li>
        <li><a href="#" tabindex="0">Conditions générales d'utilisation</a></li>
        <li><a href="#" tabindex="0">Mention légale</a></li>
        <li role="none"><a href="#" tabindex="0">Protection des données personnelles</a></li>
      </ul>
    </div>
    <div class="footer-right">
      <p>&copy; 2024 Nimba</p>
    </div>
  </footer>

  <script>
    /**
     * 🎯 NIMBA HEADER - OPTIMISÉ POUR LA PERFORMANCE ET L'ACCESSIBILITÉ
     * 🔥 CORRECTION DU BUG: Mega-menu qui bloque les clics après fermeture
     */
    class NimbaHeader {
      constructor() {
        // Éléments DOM avec vérification d'existence
        this.header = document.querySelector('.header');
        this.burger = document.getElementById('burgerMenu');
        this.megaMenu = document.getElementById('megaMenu');
        
        // État du menu
        this.isMenuOpen = false;
        this.isScrolling = false;
        this.scrollTimer = null;
        this.resizeTimer = null;
        
        // Mémorisation de la position de scroll
        this.lastScrollY = 0;
        this.scrollThreshold = window.innerWidth < 768 ? 60 : 100;
        
        // Binding des méthodes
        this.handleScroll = this.throttle(this.handleScroll.bind(this), 16);
        this.handleResize = this.debounce(this.handleResize.bind(this), 250);
        
        // Vérification des éléments requis
        if (!this.header || !this.burger || !this.megaMenu) {
          console.error('NimbaHeader: Éléments DOM requis manquants');
          return;
        }
        
        this.init();
      }

      /**
       * 🚀 INITIALISATION
       */
      init() {
        try {
          // Gestionnaires d'événements
          this.addEventListeners();
          
          // Configuration initiale
          this.setupInitialState();
          
          // Configuration de l'accessibilité
          this.setupAccessibility();
          
          console.log('NimbaHeader: Initialisé avec succès - Bug du mega-menu corrigé');
        } catch (error) {
          console.error('NimbaHeader: Erreur lors de l\'initialisation:', error);
        }
      }

      /**
       * 📡 AJOUT DES GESTIONNAIRES D'ÉVÉNEMENTS
       */
      addEventListeners() {
        // Burger menu (mobile uniquement)
        this.burger.addEventListener('click', this.handleBurgerClick.bind(this));
        
        // Scroll avec throttling
        window.addEventListener('scroll', this.handleScroll, { passive: true });
        
        // Resize avec debouncing
        window.addEventListener('resize', this.handleResize, { passive: true });
        
        // Sous-menus (mobile uniquement)
        this.setupSubMenus();
        
        // Fermeture externe et clavier
        this.setupExternalClosing();
        
        // Gestion du focus trap dans le menu
        this.setupFocusTrap();
      }

      /**
       * 🎯 GESTION DU BURGER MENU
       */
      handleBurgerClick(e) {
        e.preventDefault();
        e.stopPropagation();
        
        if (window.innerWidth >= 768) return;
        
        this.isMenuOpen ? this.closeMenu() : this.openMenu();
        
        // Retour haptique sur mobile
        if ('vibrate' in navigator && /Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
          navigator.vibrate(30);
        }
      }

      /**
       * 📂 OUVERTURE DU MENU
       */
      openMenu() {
        if (this.isMenuOpen) return;
        
        this.isMenuOpen = true;
        this.burger.setAttribute('aria-expanded', 'true');
        this.burger.classList.add('active');
        this.megaMenu.classList.add('show');
        
        // 🔥 FIX: S'assurer que le mega-menu reçoit les événements quand ouvert
        this.megaMenu.style.pointerEvents = 'auto';
        this.megaMenu.style.zIndex = '1000';
        
        // Prévention du scroll du body
        document.body.style.overflow = 'hidden';
        
        // Focus sur le premier élément focusable du menu
        this.focusFirstMenuItem();
        
        // Animation avec requestAnimationFrame pour la performance
        requestAnimationFrame(() => {
          this.megaMenu.style.maxHeight = this.megaMenu.scrollHeight + 'px';
        });
      }

      /**
       * 📂 FERMETURE DU MENU
       */
      closeMenu() {
        if (!this.isMenuOpen) return;
        
        this.isMenuOpen = false;
        this.burger.setAttribute('aria-expanded', 'false');
        this.burger.classList.remove('active');
        this.megaMenu.classList.remove('show');
        
        // 🔥 FIX CRITIQUE: Désactiver complètement le mega-menu quand fermé
        this.megaMenu.style.pointerEvents = 'none';
        this.megaMenu.style.zIndex = '-1';
        
        // Restauration du scroll du body
        document.body.style.overflow = '';
        
        // Fermeture de tous les sous-menus
        this.closeAllSubMenus();
        
        // 🔥 FIX: Forcer le reflow pour s'assurer que les changements sont appliqués
        this.megaMenu.offsetHeight;
        
        // Retour du focus au burger avec délai pour éviter les conflits
        setTimeout(() => {
          if (!this.isMenuOpen) {
            this.burger.focus();
          }
        }, 50);
      }

      /**
       * 🔄 GESTION DU SCROLL AVEC OPTIMISATION
       */
      handleScroll() {
        const currentScrollY = window.scrollY;
        const isMobile = window.innerWidth < 768;
        
        // Éviter les calculs inutiles
        if (Math.abs(currentScrollY - this.lastScrollY) < 2) return;
        
        // Application des effets selon le viewport
        if (isMobile) {
          this.applyMobileScrollEffect(currentScrollY);
        } else {
          this.applyDesktopScrollEffect(currentScrollY);
        }
        
        this.lastScrollY = currentScrollY;
        
        // Fermeture du menu mobile si ouvert pendant le scroll
        if (isMobile && this.isMenuOpen) {
          this.closeMenu();
        }
      }

      /**
       * 📱 EFFET SCROLL MOBILE
       */
      applyMobileScrollEffect(scrollY) {
        const shouldHide = scrollY > this.scrollThreshold;
        
        if (shouldHide !== this.header.classList.contains('scrolled')) {
          this.header.classList.toggle('scrolled', shouldHide);
        }
      }

      /**
       * 🖥️ EFFET SCROLL DESKTOP
       */
      applyDesktopScrollEffect(scrollY) {
        const shouldHide = scrollY > 100;
        
        if (shouldHide !== this.header.classList.contains('scrolled')) {
          this.header.classList.toggle('scrolled', shouldHide);
        }
      }

      /**
       * 📐 GESTION DU RESIZE
       */
      handleResize() {
        const isMobile = window.innerWidth < 768;
        
        // Mise à jour du seuil de scroll
        this.scrollThreshold = isMobile ? 60 : 100;
        
        // Fermeture du menu mobile si passage en desktop
        if (!isMobile && this.isMenuOpen) {
          this.closeMenu();
        }
        
        // 🔥 FIX: Réinitialisation complète du mega-menu selon le viewport
        if (isMobile) {
          // Mode mobile: comportement dropdown
          if (!this.isMenuOpen) {
            this.megaMenu.style.pointerEvents = 'none';
            this.megaMenu.style.zIndex = '-1';
          }
        } else {
          // Mode desktop: comportement normal
          this.megaMenu.style.pointerEvents = 'auto';
          this.megaMenu.style.zIndex = 'auto';
        }
        
        // Réinitialisation des styles en cas de changement de breakpoint
        this.resetResponsiveStyles();
      }

      /**
       * 📋 CONFIGURATION DES SOUS-MENUS
       */
      setupSubMenus() {
        const buttons = this.megaMenu.querySelectorAll('button[data-submenu]');
        
        buttons.forEach(button => {
          button.addEventListener('click', (e) => {
            if (window.innerWidth >= 768) return; // Desktop = hover uniquement
            
            e.preventDefault();
            e.stopPropagation();
            
            const submenuId = button.getAttribute('data-submenu');
            const submenu = document.getElementById(submenuId);
            
            if (!submenu) return;
            
            const isOpen = submenu.classList.contains('show');
            
            // Fermeture des autres sous-menus
            this.closeAllSubMenus();
            
            // Toggle du sous-menu actuel
            if (!isOpen) {
              this.openSubMenu(button, submenu);
            }
          });
        });
      }

      /**
       * 📂 OUVERTURE D'UN SOUS-MENU
       */
      openSubMenu(button, submenu) {
        button.setAttribute('aria-expanded', 'true');
        submenu.classList.add('show');
        
        // Animation performante
        requestAnimationFrame(() => {
          submenu.style.maxHeight = submenu.scrollHeight + 'px';
        });
      }

      /**
       * 📂 FERMETURE DE TOUS LES SOUS-MENUS
       */
      closeAllSubMenus() {
        const openSubmenus = this.megaMenu.querySelectorAll('.submenu.show');
        const expandedButtons = this.megaMenu.querySelectorAll('button[aria-expanded="true"]');
        
        openSubmenus.forEach(submenu => {
          submenu.classList.remove('show');
          submenu.style.maxHeight = '';
        });
        
        expandedButtons.forEach(button => {
          button.setAttribute('aria-expanded', 'false');
        });
      }

      /**
       * 🚪 FERMETURE EXTERNE
       */
      setupExternalClosing() {
        document.addEventListener('click', (e) => {
          if (window.innerWidth >= 768) return;
          
          const isInsideMenu = this.megaMenu.contains(e.target);
          const isBurger = this.burger.contains(e.target);
          
          if (!isInsideMenu && !isBurger && this.isMenuOpen) {
            this.closeMenu();
          }
        });
        
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && this.isMenuOpen) {
            e.preventDefault();
            this.closeMenu();
          }
        });
      }

      /**
       * ♿ CONFIGURATION DE L'ACCESSIBILITÉ
       */
      setupAccessibility() {
        // Configuration ARIA
        this.burger.setAttribute('aria-haspopup', 'true');
        this.burger.setAttribute('aria-controls', 'megaMenu');
        
        // Labels pour les sous-menus
        const submenuButtons = this.megaMenu.querySelectorAll('button[data-submenu]');
        submenuButtons.forEach(button => {
          const submenuId = button.getAttribute('data-submenu');
          button.setAttribute('aria-controls', submenuId);
        });
      }

      /**
       * 🎯 FOCUS TRAP DANS LE MENU
       */
      setupFocusTrap() {
        this.megaMenu.addEventListener('keydown', (e) => {
          if (!this.isMenuOpen) return;
          
          const focusableElements = this.getFocusableElements();
          const firstElement = focusableElements[0];
          const lastElement = focusableElements[focusableElements.length - 1];
          
          if (e.key === 'Tab') {
            if (e.shiftKey) {
              if (document.activeElement === firstElement) {
                e.preventDefault();
                lastElement.focus();
              }
            } else {
              if (document.activeElement === lastElement) {
                e.preventDefault();
                firstElement.focus();
              }
            }
          }
        });
      }

      /**
       * 🎯 ÉLÉMENTS FOCUSABLES
       */
      getFocusableElements() {
        const selector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
        return Array.from(this.megaMenu.querySelectorAll(selector))
          .filter(element => !element.hasAttribute('disabled') && element.offsetParent !== null);
      }

      /**
       * 🎯 FOCUS SUR LE PREMIER ÉLÉMENT
       */
      focusFirstMenuItem() {
        const firstFocusable = this.getFocusableElements()[0];
        if (firstFocusable) {
          setTimeout(() => firstFocusable.focus(), 100);
        }
      }

      /**
       * 🔧 ÉTAT INITIAL
       */
      setupInitialState() {
        // Vérification du scroll initial
        this.handleScroll();
        
        // Configuration du z-index dynamique
        this.updateZIndex();
        
        // 🔥 FIX: S'assurer que le mega-menu est correctement initialisé
        if (window.innerWidth < 768) {
          this.megaMenu.style.pointerEvents = 'none';
          this.megaMenu.style.zIndex = '-1';
        } else {
          this.megaMenu.style.pointerEvents = 'auto';
          this.megaMenu.style.zIndex = 'auto';
        }
      }

      /**
       * 📐 RÉINITIALISATION DES STYLES RESPONSIVES
       */
      resetResponsiveStyles() {
        if (window.innerWidth >= 768) {
          // Desktop: réinitialisation des styles mobiles
          document.body.style.overflow = '';
          this.closeAllSubMenus();
          
          // 🔥 FIX: Réactivation du mega-menu sur desktop
          this.megaMenu.style.pointerEvents = 'auto';
          this.megaMenu.style.zIndex = 'auto';
        } else {
          // Mobile: s'assurer que le mega-menu est désactivé si fermé
          if (!this.isMenuOpen) {
            this.megaMenu.style.pointerEvents = 'none';
            this.megaMenu.style.zIndex = '-1';
          }
        }
      }

      /**
       * 🎚️ MISE À JOUR DU Z-INDEX
       */
      updateZIndex() {
        // S'assurer que l'en-tête reste au-dessus des autres éléments
        const maxZ = Math.max(
          ...Array.from(document.querySelectorAll('*')).map(el => 
            parseInt(window.getComputedStyle(el).zIndex) || 0
          )
        );
        
        if (maxZ >= 999) {
          this.header.style.zIndex = maxZ + 10;
          this.burger.style.zIndex = maxZ + 11;
          // Le mega-menu garde son z-index dynamique géré séparément
        }
      }

      /**
       * 🚀 THROTTLE HELPER
       */
      throttle(func, limit) {
        let inThrottle;
        return function() {
          const args = arguments;
          const context = this;
          if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
          }
        };
      }

      /**
       * 🚀 DEBOUNCE HELPER
       */
      debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      /**
       * 🧹 NETTOYAGE
       */
      destroy() {
        // Suppression des event listeners
        window.removeEventListener('scroll', this.handleScroll);
        window.removeEventListener('resize', this.handleResize);
        
        // Nettoyage des timers
        if (this.scrollTimer) clearTimeout(this.scrollTimer);
        if (this.resizeTimer) clearTimeout(this.resizeTimer);
        
        // Restauration des styles
        document.body.style.overflow = '';
        
        // 🔥 FIX: Nettoyage du mega-menu
        this.megaMenu.style.pointerEvents = '';
        this.megaMenu.style.zIndex = '';
        
        console.log('NimbaHeader: Nettoyé avec succès');
      }
    }

    /**
     * 🎬 INITIALISATION SÉCURISÉE
     */
    class NimbaHeaderInitializer {
      static init() {
        // Vérification de l'environnement
        if (typeof document === 'undefined' || typeof window === 'undefined') {
          console.error('NimbaHeader: Environnement non supporté');
          return;
        }

        // Initialisation avec gestion d'erreurs
        const initializeHeader = () => {
          try {
            // Éviter les doubles initialisations
            if (window.nimbaHeaderInstance) {
              window.nimbaHeaderInstance.destroy();
            }

            window.nimbaHeaderInstance = new NimbaHeader();

            // Prevention du zoom sur mobile
            NimbaHeaderInitializer.preventMobileZoom();

            // Optimisations performance
            NimbaHeaderInitializer.setupPerformanceOptimizations();

          } catch (error) {
            console.error('NimbaHeader: Erreur fatale lors de l\'initialisation:', error);
          }
        };

        // Initialisation selon l'état du DOM
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initializeHeader);
        } else {
          // DOM déjà chargé
          setTimeout(initializeHeader, 0);
        }
      }

      /**
       * 📱 PRÉVENTION DU ZOOM SUR MOBILE
       */
      static preventMobileZoom() {
        const inputs = document.querySelectorAll('input, select, textarea');
        const viewport = document.querySelector('meta[name="viewport"]');
        
        if (!viewport) return;
        
        const originalViewport = viewport.content;
        
        inputs.forEach(element => {
          element.addEventListener('focus', () => {
            if (window.innerWidth < 768 && element.getAttribute('type') !== 'range') {
              viewport.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
            }
          }, { passive: true });
          
          element.addEventListener('blur', () => {
            viewport.content = originalViewport;
          }, { passive: true });
        });
      }

      /**
       * ⚡ OPTIMISATIONS PERFORMANCE
       */
      static setupPerformanceOptimizations() {
        // Préchargement des images critiques
        const criticalImages = ['img_traitee/logo2.jpg'];
        criticalImages.forEach(src => {
          const link = document.createElement('link');
          link.rel = 'preload';
          link.as = 'image';
          link.href = src;
          document.head.appendChild(link);
        });

        // Lazy loading pour les images non critiques
        const lazyImages = document.querySelectorAll('img[loading="lazy"]');
        if ('IntersectionObserver' in window && lazyImages.length) {
          const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src || img.src;
                imageObserver.unobserve(img);
              }
            });
          });
          
          lazyImages.forEach(img => imageObserver.observe(img));
        }
      }
    }

    // 🚀 DÉMARRAGE AUTOMATIQUE
    NimbaHeaderInitializer.init();

    // 🔧 EXPOSITION GLOBALE POUR DEBUG (DÉVELOPPEMENT UNIQUEMENT)
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      window.NimbaHeaderDebug = {
        getInstance: () => window.nimbaHeaderInstance,
        getState: () => ({
          isMenuOpen: window.nimbaHeaderInstance?.isMenuOpen,
          lastScrollY: window.nimbaHeaderInstance?.lastScrollY,
          scrollThreshold: window.nimbaHeaderInstance?.scrollThreshold
        }),
        toggleMenu: () => window.nimbaHeaderInstance?.handleBurgerClick({ preventDefault: () => {}, stopPropagation: () => {} }),
        // 🔥 FIX: Fonction debug pour tester le mega-menu
        testMegaMenuState: () => {
          const megaMenu = document.getElementById('megaMenu');
          return {
            zIndex: window.getComputedStyle(megaMenu).zIndex,
            pointerEvents: window.getComputedStyle(megaMenu).pointerEvents,
            opacity: window.getComputedStyle(megaMenu).opacity,
            display: window.getComputedStyle(megaMenu).display
          };
        },
        version: '2.0.0 - Bug mega-menu CORRIGÉ'
      };
      
      console.log('🔥 NimbaHeader: Bug du mega-menu corrigé - Debug disponible: window.NimbaHeaderDebug');
    }

    // 🛡️ PROTECTION CONTRE LES ERREURS GLOBALES
    window.addEventListener('error', (e) => {
      if (e.error && e.error.message && e.error.message.includes('NimbaHeader')) {
        console.error('NimbaHeader: Erreur capturée:', e.error);
        // Tentative de récupération
        setTimeout(() => {
          if (!window.nimbaHeaderInstance) {
            NimbaHeaderInitializer.init();
          }
        }, 1000);
      }
    });

    // 📊 MÉTRIQUES PERFORMANCE (OPTIONNEL)
    if ('performance' in window && 'mark' in window.performance) {
      window.performance.mark('nimba-header-init-start');
      
      // Marquer la fin après l'initialisation
      setTimeout(() => {
        window.performance.mark('nimba-header-init-end');
        try {
          window.performance.measure('nimba-header-init-duration', 'nimba-header-init-start', 'nimba-header-init-end');
        } catch (e) {
          // Mesure échouée, pas critique
        }
      }, 100);
    }

  </script>
</body>
</html>